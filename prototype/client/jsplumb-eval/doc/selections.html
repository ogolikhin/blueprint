<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <script src="/js/jquery.min.js"></script>
        <title>jsPlumb Toolkit - documentation</title>
        <link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="../css/main.css" rel="stylesheet">



        <link rel="stylesheet" href="../css/jsplumb-doc.css">
        <script src="/js/docs.js"></script>
    </head>

    <body>

        <!-- Fixed navbar -->
<div class="navbar navbar-top navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="../index.html"><img src="../img/logo-medium-jsplumb.png"></a>

        </div>

        <div class="navbar-collapse collapse nav-wrapper">
            <ul class="nav navbar-nav">
                <li><a href="../index.html#demos">DEMOS</a></li>
<li><a href="../doc/home.html">DOCS</a></li>
<li><a href="../apidocs/index.html">APIDOCS</a></li>

            </ul>

            <div class="social-nav hidden-xs">
                <!--a href="#" class="link"><span class="icon-facebook"></span></a-->
<a href="http://twitter.com/jsplumblib" class="link"><span class="icon-twitter"></span></a>
<a href="http://github.com/sporritt/jsplumb/" class="link"><span class="icon-github"></span></a>
<a href="http://www.linkedin.com/company/jsplumb" class="link"><span class="icon-linkedin"></span></a>

            </div>
        </div><!--/.nav-collapse -->
    </div>
</div>


        <div class="container padding-top">
            <div class="row" id="docs">
                <div class="docs-nav col-xs-3" tabindex="0">
                    <ul>
<li><a href="home.html">Home</a></li>
<li><a href="getting-started.html">Getting Started</a></li>
<li><a href="basic-concepts.html">Basic Concepts</a>
    <ul>
        <li><a href="basic-concepts.html#instantiating">Instantiating the Toolkit</a></li>
        <li><a href="basic-concepts.html#basicloading">Loading Data</a></li>
        <li><a href="basic-concepts.html#rendering">Rendering</a></li>
    </ul>
</li>  
<li><a href="data-model.html">Data Model</a>
    <ul>
        <li><a href="data-model.html#format">Data Format</a></li>
        <li><a href="data-model.html#node-edge-port-id">Node, Edge and Port IDs</a></li>
        <li><a href="data-model.html#node-edge-port-type">Node, Edge and Port Type</a></li>
        <li><a href="data-model.html#datafactories">Data Factories</a></li>
    </ul>
</li>  
<li><a href="rendering.html">Rendering</a>
<ul>
    <li><a href="models-and-views.html">Models and Views</a></li>
    <li><a href="templating.html">Templating</a></li>
    <li><a href="layouts.html">Layouts</a></li>
    <li><a href="ui-states.html">UI States</a></li>
    <li><a href="path-tracing.html">Path Tracing</a></li>
    <li><a href="rendering.html#dragpalette">Drag & Drop Nodes</a></li>
    <li><a href="navigation.html">Navigating your Dataset</a></li>
</ul>
</li>
<li>
Data Management
    <ul>
        <li><a href="loading-and-saving-data.html">Loading & Saving Data</a></li>
        <li><a href="loading-and-saving-data.html#loading">Loading</a></li>
        <li><a href="updating-data.html">Updating Data</a></li>
    </ul>
</li>
    
<li><a href="css.html">CSS</a>
    <ul>
        <li><a href="css.html#defaultcss">Default CSS Stylesheet</a></li>
        <li><a href="css.html#ref">Class Reference</a></li>
    </ul>
</li>
  
<li><a href="events.html">Events</a>
    <ul>
        <li><a href="events.html#toolkit">Toolkit Events</a></li>
        <li><a href="events.html#surface">Rendering Events</a></li>
    </ul>
</li>
  
<li>Selecting Content
    <ul>
      <li><a href="selections.html">Selections</a></li>
      <li><a href="paths.html">Paths</a></li>
      <li><a href="filters.html">Filters</a></li>
    </ul>
</li>

<li><a href="angular-integration.html">Angular Integration</a></li>
<li>Demonstrations
    <ul>
      <li><a href="demo-hierarchical.html">Hierarchical Layout</a></li>
      <li><a href="demo-spring.html">Spring Layout</a></li>
      <li><a href="demo-imageWidget.html">Image Widget</a></li>
      <li><a href="demo-circular.html">Circular Layout</a></li>
      <li><a href="demo-multiple.html">Multiple Renderers</a></li>
      <li><a href="demo-paths.html">Path Tracing</a></li>
      <li><a href="demo-absolute.html">Absolute Layout</a></li>
      <li><a href="demo-database-visualizer.html">Database Visualizer</a></li>
      <li><a href="demo-flowchart-builder.html">Flowchart Builder</a></li>
      <li><a href="demo-angular.html">Angular Integration</a></li>
      <li><a href="demo-hello-world.html">Hello World</a></li>
    </ul>
</li>
    
<li><a href="UtilityFunctions.html">Utilities</a></li>
<li><a href="dialogs.html">Dialogs</a></li>
<li><a href="drawing.html">Drawing</a></li>
</ul>
                </div>
                <div class="markdown-body col-xs-9">
                    <h2>Selections</h2>

<p><a name="top"></a></p>

<p>A Selection is a collection of Nodes, Ports and Edges (zero or more of each), upon which operations can be made that affect the entire set at once.  A Selection is an instance of the class <code>jsPlumbToolkitUtil.Selection</code>. </p>

<p>You can work with these in one of two ways - either use the <a href="#currentSelection">current selection</a> associated with an instance of the Toolkit, or <a href="#adhocSelection">create an ad-hoc instance</a>. </p>

<ul>
<li><a href="#currentSelection">Toolkit wide selection</a></li>
<li><a href="#adhocSelection">Ad-hoc Selections</a></li>
<li><a href="#descendantSelection">Selecting Descendants</a></li>
<li><a href="#removing">Removing everything in a Selection</a></li>
<li><a href="#appending">Appending Selections</a></li>
<li><a href="#limiting">Limiting Selection Size</a></li>
<li><a href="#visiblility">Hiding/Showing Selections</a></li>
</ul>

<p><a name="currentSelection"></a></p>

<h3>Toolkit Current Selection</h3>

<p>Each instance of the Toolkit maintains a <strong>current selection</strong>, exposing several methods for you to work with it. Changes to the current Selection are propagated to all Surfaces registered on some instance of the Toolkit.</p>

<p>The principal methods for working with the current selection are:</p>

<h5>setSelection(obj)</h5>

<p>Set the current selection.  Here, <code>obj</code> can take a number of forms:</p>

<ul>
<li>A Node, Port or Edge object</li>
<li>A list of Nodes/Ports/Edges</li>
<li>Another Selection</li>
<li>A Path</li>
</ul>

<h5>addToSelection(obj)</h5>

<p>Add something to the current selection.  Here, <code>obj</code> can take a number of forms:</p>

<ul>
<li>A Node, Port or Edge object</li>
<li>A list of Nodes/Ports/Edges</li>
<li>Another Selection</li>
<li>A Path</li>
</ul>

<h5>addPathToSelection(params)</h5>

<p>A helper method to get a Path (see <a href="paths.html">here</a>) and add it to the current selection.</p>

<h5>removeFromSelection(obj)</h5>

<p>Remove something from the current selection. Valid values for <code>obj</code> are the same as for the <code>addToSelection</code> and <code>setSelection</code> methods.</p>

<h5>getCurrentSelection()</h5>

<p>Get the current selection. This returns a <code>Selection</code>, which is a selector-like object that offers a number of methods for performing operations on the selection as a whole.</p>

<ul>
<li><strong>append</strong> append a new item to the current selection</li>
<li><strong>clear</strong> clear the current selection (same as calling <code>toolkit.clearSelection()</code></li>
<li><strong>each</strong> Iterate the selection. The required callback signature is <code>function(index, object)</code>.</li>
<li><strong>eachEdge</strong> Iterate through only the Edges in the Selection.</li>
<li><strong>eachNode</strong> Iterate through only the Nodes/Ports in the Selection.</li>
<li><strong>remove</strong> Remove the given item from the current selection.</li>
</ul>

<h5>clearSelection()</h5>

<p>Clears the current selection.  This method is analogous to calling <code>getCurrentSelection().clear()</code>.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="adhocSelection"></a></p>

<h3>AdHoc Selection</h3>

<p>In addition to the current selection, you can also select a set of Nodes and/or Edges on an adhoc basis:</p>

<ul>
<li><strong>select(obj)</strong></li>
<li><strong>deselect(obj)</strong></li>
</ul>

<p>Here, <code>obj</code> can be some Node/Port/Edge, or the ID of some Node or Port, or an array of a combination of these.</p>

<h4>The filter method</h4>

<p>A more powerful method to use to get a set of objects is <code>filter</code>, which, as the name suggests, can filter the contents of some Toolkit instance according to a few criteria.</p>

<h4>Selection with the mouse</h4>

<p>The Surface operates in one of two modes:</p>

<ul>
<li><strong>pan</strong></li>
</ul>

<p>The default mode, in which the mouse is used to pan the UI and support click events etc.</p>

<ul>
<li><strong>select</strong></li>
</ul>

<p>In this mode, the mouse is used to select objects in the UI using click and drag (&quot;lasso&quot; selection). Holding down the Shift key while selecting causes new objects to be added to the current selection. Otherwise, each new click and drag operation causes the current selection to be replaced.</p>

<p>Lasso selection works in the same way as AutoCAD: selecting from left to right will add nodes that intersect, in any amount, with the current selected area. Selecting from right to left will add only nodes that are completely enclosed by the current selected area.</p>

<p><a name="descendantSelection"></a></p>

<h4>Selecting Descendants</h4>

<p>If you are working with hierarchical data, you can use the Toolkit to get a list of descendants of some Node (and, optionally, the Edges to and from each Node):</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">descendants</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">selectDescendants</span><span class="p">(</span><span class="nx">someNode</span><span class="p">);</span>
</code></pre></div>
<p>The return value is a <code>Selection</code>, with all of the methods discussed above available. By default this Selection does not include the focus node or any Edges, but the method signature is as follows:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">selectDescendants</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="p">[</span><span class="nx">includeRoot</span><span class="o">=</span><span class="kc">false</span><span class="p">],</span> <span class="p">[</span><span class="nx">includeEdges</span><span class="o">=</span><span class="kc">false</span><span class="p">])</span>
</code></pre></div>
<p>So this call would return all of a Node&#39;s descendants plus the Node itself:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">descendants</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">selectDescendants</span><span class="p">(</span><span class="nx">someNode</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p>And this would get the descendants, the Node itself, and any Edges connecting the Nodes in the set:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">descendants</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">selectDescendants</span><span class="p">(</span><span class="nx">someNode</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="removing"></a></p>

<h3>Removing everything in a Selection</h3>

<p>This is a fairly common use case when working with a Selection:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">selection</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">selectDescendants</span><span class="p">(</span><span class="nx">someNode</span><span class="p">);</span>
<span class="nx">toolkit</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">selection</span><span class="p">);</span>
</code></pre></div>
<p>Here we used the <code>selectDescendants</code> method, but we could have used any method that returns a Selection or Path - <code>select</code>, <code>selectDescendants</code>, <code>filter</code> or <code>getPath</code>.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="appending"></a></p>

<h3>Appending Selections</h3>

<p>You can append Selections to each other:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">selection1</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">select</span><span class="p">([</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">]);</span>
<span class="c1">// we have a selection containing nodes 1, 2 and 3</span>
<span class="kd">var</span> <span class="nx">selection2</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">getPath</span><span class="p">({</span><span class="nx">source</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;17&quot;</span><span class="p">});</span>
<span class="c1">// we have a selection containing the path from node 1 to node 17</span>

<span class="nx">selection1</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">selection2</span><span class="p">);</span>
</code></pre></div>
<p>This is perhaps a spurious example. But you get the idea.</p>

<hr>

<p><a name="limiting"></a></p>

<h3>Limiting Selection Size</h3>

<p>You can limit the number of Nodes and/or Edges in a Selection or Toolkit instance&#39;s <code>currentSelection</code>.  This can be useful in a few ways: maybe your app wants to enforce that only one Node is selected at any point in time, for instance. Or maybe you want to maintain a selection queue of fixed size for some purpose.</p>

<h4>Limiting the Toolkit&#39;s Current Selection</h4>

<p>You can provide constructor parameters to control this behaviour:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">tk</span> <span class="o">=</span> <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">({</span>
  <span class="nx">maxSelectedNodes</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="nx">maxSelectedEdges</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="nx">selectionCapacityPolicy</span><span class="o">:</span><span class="nx">jsPlumbToolkitUtil</span><span class="p">.</span><span class="nx">Selection</span><span class="p">.</span><span class="nx">DISCARD_NEW</span>
<span class="p">});</span>
</code></pre></div>
<p>Here we have specified that at most 1 Node and 1 Edge may be selected, and that when the user tries to add a new Node or Edge to the current selection, it should be discarded. The other option - the default option - for <code>selectionCapacityPolicy</code> is <code>Selection.DISCARD_EXISTING</code>, which takes the 0th element from the underlying list.</p>

<p>You can also control these values with setter methods:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">tk</span><span class="p">.</span><span class="nx">setMaxSelectedNodes</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="nx">tk</span><span class="p">.</span><span class="nx">setMaxSelectedEdges</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">tk</span><span class="p">.</span><span class="nx">setSelectionCapacityPolicy</span><span class="p">(</span><span class="nx">jsPlumbToolkitUtil</span><span class="p">.</span><span class="nx">Selection</span><span class="p">.</span><span class="nx">DISCARD_EXISTING</span><span class="p">);</span>
</code></pre></div>
<h4>Limiting an AdHoc Selection</h4>

<p>To set limits and control the capacity policy of an ad-hoc selection, these methods are available:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">tk</span><span class="p">.</span><span class="nx">select</span><span class="p">();</span> <span class="c1">// create an empty selection</span>
<span class="nx">sel</span><span class="p">.</span><span class="nx">setMaxNodes</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="nx">sel</span><span class="p">.</span><span class="nx">setMaxEdges</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">sel</span><span class="p">.</span><span class="nx">setCapacityPolicy</span><span class="p">(</span><span class="nx">jsPlumbToolkitUtil</span><span class="p">.</span><span class="nx">Selection</span><span class="p">.</span><span class="nx">DISCARD_EXISTING</span><span class="p">);</span>
</code></pre></div>
<p><a name="visibility"></a></p>

<h3>Hiding/Showing Selections</h3>

<p>Once you have a Selection, you can instruct a Surface to hide/show the entire Selection at once:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">tk</span><span class="p">.</span><span class="nx">select</span><span class="p">([</span><span class="s2">&quot;node1&quot;</span><span class="p">,</span> <span class="s2">&quot;node2&quot;</span><span class="p">]);</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">setVisible</span><span class="p">(</span><span class="nx">sel</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div>
<p>Here we assume the existence of a Toolkit called <code>tk</code> and a Surface called <code>surface</code>.  Hiding/showing elements
is covered in more detail on the <a href="rendering.html#visibility">rendering</a> page.</p>

                </div>
            </div>
        </div>

    </body>

</html>
