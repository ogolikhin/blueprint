<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <meta content="en" http-equiv="content-language" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <title>ag-grid</title>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

  <!-- <script src="https://code.jquery.com/jquery-1.12.2.js"></script> -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
  <script src="dragdrop.js"></script>
  <script src="ag-grid.js"></script>
  <script src="app.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Open Sans", sans-serif;
    }
    #top-bar {
      line-height: 50px;
      height: 50px;
    }
    #main-container {
      height: calc(100% - 50px);
    }
    #centerPane {
      width: calc(50% - 10px);
      background: #cecece;
      color: #fff;
      position: relative;
    }
    #leftPane, #rightPane {
      width: calc(25% - 5px);
    }
    #rightPane {
      background: #fff;
    }

    /* styles related to the ree */
    .ag-body {
      background-color: #474747;
      color: #fff;
      padding: 0 !important;
    }
    .myrow {
      font: normal 14px "Open Sans", sans-serif;
      line-height: 30px;
    }
    .myicon {
      width: 30px;
      display: inline-block;
      text-align: center;
    }
    .mychild2 {
      padding-left: 26px;
    }
    .mychild {
      padding-left: 55px;
    }
    .ag-row-level-2 .mychild {
      padding-left: 81px;
    }
    .myhightlight {
      font-weight: bold;
      background: yellow;
      color: black;
    }
    .mychild.word::before {
      content: "\f1c2";
      font: normal normal normal 14px/1 FontAwesome;
      font-size: inherit;
      margin-left: -30px;
      width: 30px;
      display: inline-block;
      text-align: center;
      color: lightblue;
    }
    .mychild.excel::before {
      content: "\f1c3";
      font: normal normal normal 14px/1 FontAwesome;
      font-size: inherit;
      margin-left: -30px;
      width: 30px;
      display: inline-block;
      text-align: center;
      color: green;
    }
    .myrow.ag-row-focus {
      border-radius: 4px;
      background: #3e3e3e;
    }
    .mychild.ag-cell-focus {
      border-radius: 4px;
      background: #019cde !important;
      color: #fff !important;
    }
    .mychild.ag-cell-focus.word::before,
    .mychild.ag-cell-focus.excel::before {
      color: #fff;
    }

    .over {
      background-color: darkred;
    }

    /* styles related to accordion */
    #rightPane .utility-panel {
      background: #fff;
      padding: 0;
      vertical-align: bottom;
      height: 100%;
      overflow: hidden;
    }

    #rightPane .no-select, #rightPane h2 {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    #rightPane ul {
      list-style: none;
      padding: 0;
      margin: 0;
      height: 100%;
    }
    #rightPane ul li {
      position: relative;
      padding: 0;
      margin: 0;
      width: 100%;
    }
    #rightPane ul li input[type=checkbox].pin {
      z-index: 2;
      position: absolute;
      top: 5px;
      right: 24px;
      visibility: hidden;
    }
    #rightPane ul li input[type=radio].state {
      position: absolute;
      cursor: pointer;
      width: 100%;
      height: 33px;
      z-index: 1;
      opacity: 0;
    }
    #rightPane ul li i {
      position: absolute;
      transform: translate(-6px, 0);
      margin-top: 10px;
      right: 8px;
    }
    #rightPane ul li i:before, #rightPane ul li i:after {
      content: "";
      position: absolute;
      background-color: #fff;
      width: 3px;
      height: 9px;
    }
    #rightPane ul li h2.header {
      font-size: 16px;
      line-height: 32px;
      font-weight: 300;
      display: block;
      background-color: silver;
      margin: 0;
      cursor: pointer;
      color: #fff;
      padding-left: 4px;
      border-top: solid 1px black;
    }
    #rightPane ul li div.content {
      font-size: 14px;
      overflow: auto;
      margin: 0;
      height: 0;
      opacity: 0;
      z-index: 2;
    }

    #rightPane ul li input[type=radio].state:checked ~ input[type=checkbox].pin,
    #rightPane ul li input[type=checkbox].pin:checked {
      visibility: visible;
    }

    #rightPane ul li input[type=radio].state:checked ~ div,
    #rightPane ul li input[type=checkbox].pin:checked ~ div {
      opacity: 1;
      padding: 0 10px;
    }
    #rightPane ul li i:before {
      transform: translate(2px, 0) rotate(45deg);
    }
    #rightPane ul li i:after {
      transform: translate(-2px, 0) rotate(-45deg);
    }
    #rightPane ul li input[type=checkbox].pin:checked ~ i:before,
    #rightPane ul li input[type=radio].state:checked ~ i:before {
      transform: translate(-2px, 0) rotate(45deg);
    }
    #rightPane ul li input[type=checkbox].pin:checked ~ i:after,
    #rightPane ul li input[type=radio].state:checked ~ i:after {
      transform: translate(2px, 0) rotate(-45deg);
    }
    /* SCSS function to generate rule for equally dividing the height amongst siblings
	ref: http://stackoverflow.com/questions/8720931/can-css-detect-the-number-of-children-an-element-has */
    /*
		@for $i from 1 through 20 {
			li:first-child:nth-last-child( #{$i} ),
			li:first-child:nth-last-child( #{$i} ) ~ li {
				height: calc(100% / #{$i} - 10px);
			}
		}
	*/

    /* styles related to panes splitter */
    .split {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;

      overflow-y: auto;
      overflow-x: hidden;
    }

    .gutter {
      background-color: #eee;

      background-repeat: no-repeat;
      background-position: 50%;
    }

    .gutter.gutter-horizontal {
      background-image: url('grips/vertical.png');
      cursor: ew-resize;
    }

    .gutter.gutter-vertical {
      background-image: url('grips/horizontal.png');
      cursor: ns-resize;
    }

    .split.split-horizontal, .gutter.gutter-horizontal {
      height: 100%;
      float: left;
    }
  </style>
</head>
<body ng-app="example" ng-controller="exampleCtrl">
<div id="top-bar" style="overflow: hidden">
  Blueprint top bar
  - <a href="javascript:void(0)" onclick="closeLeft()">[close left]</a> | <a href="javascript:void(0)" onclick="openLeft()">[open left]</a>
  - <a href="javascript:void(0)" onclick="closeRight()">[close right]</a> | <a href="javascript:void(0)" onclick="openRight()">[open right]</a>
</div>
<div id="main-container">
  <div id="leftPane" ag-grid="gridOptions" class="mygrid split split-horizontal"></div>
  <div id="centerPane" ui-on-drop="onDrop($data)" droppable class="split split-horizontal">Drop zone</div>
  <div id="rightPane" class="split split-horizontal"><div class="utility-panel">
    <ul bp-accordion header-height="33px">
      <li>
        <input type="radio" name="accordion" checked="checked" class="state"><input type="checkbox" class="pin">
        <i></i>
        <h2 class="header">Discussion</h2>
        <div class="content">This page was written in HTML and CSS. The CSS was compiled from SASS. I used Normalize as my CSS reset and -prefix-free to save myself some headaches. I haven't quite gotten the hang of Slim for compiling into HTML, but someday I'll use it since its syntax compliments that of SASS. Regardless, this could all be done in plain HTML and CSS.</div>
      </li>
      <li>
        <input type="radio" name="accordion" class="state"><input type="checkbox" class="pin">
        <i></i>
        <h2 class="header">Attachment</h2>
        <div class="content">Using the sibling and checked selectors, we can determine the styling of sibling elements based on the checked state of the checkbox input element. One use, as demonstrated here, is an entirely CSS and HTML accordion element. Media queries are used to make the element responsive to different screen sizes. Using the sibling and checked selectors, we can determine the styling of sibling elements based on the checked state of the checkbox input element. One use, as demonstrated here, is an entirely CSS and HTML accordion element. Media queries are used to make the element responsive to different screen sizes. Using the sibling and checked selectors, we can determine the styling of sibling elements based on the checked state of the checkbox input element. One use, as demonstrated here, is an entirely CSS and HTML accordion element. Media queries are used to make the element responsive to different screen sizes.</div>
      </li>
      <li>
        <input type="radio" name="accordion" class="state"><input type="checkbox" class="pin">
        <i></i>
        <h2 class="header">Relationships</h2>
        <div class="content">By making the open state default for when :checked isn't detected, we can make this system accessable for browsers that don't recognize :checked. The fallback is simply an open accordion. The accordion can be manipulated with Javascript (if needed) by changing the "checked" property of the input element.</div>
      </li>
      <li>
        <input type="radio" name="accordion" class="state"><input type="checkbox" class="pin">
        <i></i>
        <h2 class="header">Another item</h2>
        <div class="content">
          <input type="text" size="20" style="width: 250px"><br><br>
          <textarea rows="10" style="width: 250px"></textarea><br><br>
          <select multiple size="5" style="width: 250px">
            <option>Option 1
            <option>Option 2
            <option>Option 3
            <option>Option 4
            <option>Option 5
            <option>Option 6
          </select><br><br>
          <select style="width: 250px">
            <option>Option 1
            <option>Option 2
            <option>Option 3
            <option>Option 4
            <option>Option 5
            <option>Option 6
          </select>
        </div>
      </li>
    </ul></div></div>
</div>
</body>
<script src="split.js"></script>
<script>
  Split(['#leftPane', '#centerPane', "#rightPane"], {
    sizes: [25, 50, 25],
    minSize: 200
  });

  function parseWidth(str) {
    var regex = /\d+(\.\d+)?%/g;

    var floats = str.match(regex).map(function(v) { return parseFloat(v); });

    return floats.join("");
  }

  var leftOpen = true;
  var rightOpen = true;

  function closeLeft() {
    document.getElementById('leftPane').style.width = "0";
    if(rightOpen) {
      var width = document.getElementById('rightPane').style.width;
      width = 100 - parseFloat(parseWidth(width));
      width = "calc(" + width + "% - 15px)";
      document.getElementById('centerPane').style.width = width;
    } else {
      document.getElementById('centerPane').style.width = "calc(100% - 20px)";
    }
    leftOpen = false;
    return false;
  }

  function openLeft() {
    document.getElementById('leftPane').style.width = "calc(25% - 5px)";
    if(rightOpen) {
      var width = document.getElementById('rightPane').style.width;
      width = 75 - parseFloat(parseWidth(width));
      width = "calc(" + width + "% - 10px)";
      document.getElementById('centerPane').style.width = width;
    } else {
      document.getElementById('centerPane').style.width = "calc(75% - 15px)";
    }
    leftOpen = true;
    return false;
  }

  function closeRight() {
    document.getElementById('rightPane').style.width = "0";
    if(leftOpen) {
      var width = document.getElementById('leftPane').style.width;
      width = 100 - parseFloat(parseWidth(width));
      width = "calc(" + width + "% - 15px)";
      document.getElementById('centerPane').style.width = width;
    } else {
      document.getElementById('centerPane').style.width = "calc(100% - 20px)";
    }
    rightOpen = false;
    return false;
  }

  function openRight() {
    document.getElementById('rightPane').style.width = "calc(25% - 5px)";
    if(leftOpen) {
      var width = document.getElementById('leftPane').style.width;
      width = 75 - parseFloat(parseWidth(width));
      width = "calc(" + width + "% - 10px)";
      document.getElementById('centerPane').style.width = width;
    } else {
      document.getElementById('centerPane').style.width = "calc(75% - 15px)";
    }
    rightOpen = true;
    return false;
  }
</script>
</html>
