@import "../settings/colors";

$properties-min-width: $page-body-min-width - 40px - 30px - 2px;
$property-min-height: 28px;
$property-multiple-height: 98px;
$property-horiz-spacing: 10px;
$property-label-width: 100px;
$property-width: $properties-min-width + $property-label-width - 2 * $property-horiz-spacing - 2px;
$property-input-width: $property-width - 2 * $property-horiz-spacing - $property-label-width;
$property-input-icon-width: 40px;
$property-input-with-icon-width: $property-input-width - $property-input-icon-width;
$property-content-min-width: $property-input-width + 3 * $property-horiz-spacing; // should be 4 * ...
$property-padding-default: 6px;
$property-select-background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAABCAIAAAATs2rlAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjg4QzNENTgzNDQ0MjExRTY5RDA5RjY5NDY2Qzk4NEI1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjg4QzNENTg0NDQ0MjExRTY5RDA5RjY5NDY2Qzk4NEI1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODhDM0Q1ODE0NDQyMTFFNjlEMDlGNjk0NjZDOTg0QjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODhDM0Q1ODI0NDQyMTFFNjlEMDlGNjk0NjZDOTg0QjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz72Ya4LAAAAKUlEQVR42mJ88eIFLy8vAwPD////gSQjIyMDGAC5yGxcUsgKqAgAAgwAL9YR3iDzIXQAAAAASUVORK5CYII=');
$property-choice-height: 24px;

$richtext-fontcolor: #000;
$richtext-linkcolor: #00f;
$richtext-min-height: 150px;
$richtext-fontsize: 12pt;
$richtext-fontfamily: $font-family-base;

pagecontent, bp-properties-panel {
    .properties {
        border: solid 1px $gray-lighter;
        min-width: $properties-min-width;

        + .properties {
            margin-top: 15px;
        }

        &::after {
            clear: both;
            content: '';
            display: table;
        }

        > .heading {
            color: $gray-dark;
            cursor: pointer;
            font-size: $font-size-big;
            font-weight: 600;
            line-height: 1em;
            min-height: 36px;
            padding: 11px 14px 11px 9px;

            &::before {
                border-left: 5px solid transparent;
                border-right: 5px solid transparent;
                border-top: 5px dashed;
                border-top: 5px solid \9
            ;
                content: '';
                display: inline-block;
                height: 0;
                margin-right: 5px;
                position: relative;
                top: -2px;
                width: 0;
            }
        }

        &.collapsed {
            > .heading::before {
                border-bottom: 5px solid transparent;
                border-left: 5px dashed;
                border-left: 5px solid \9
            ;
                border-top: 5px solid transparent;
                left: 3px;
                top: 0;
            }

            .content {
                display: none;
            }

            .content.system-properties {
                display: block;
                height: #{$property-min-height + 12px};
                overflow: hidden;

                &.collapse:not(.in) .formly .formly-field:first-child {
                    width: 100%;
                }
            }
        }
    }

    .formly {
        align-content: flex-start;
        align-items: flex-start;
        display: flex;
        flex-wrap: wrap;
        font-size: .9rem;
        justify-content: space-between;
        margin: 0 $property-horiz-spacing;
        min-width: $property-width - $property-label-width;
        padding: 0;

        // create "padding" to align un-even numbers of property groups
        &::after,
        &::before {
            content: '';
            display: flex;
            //flex: 392px;
            flex-grow: 0;
            flex-shrink: 1;
            order: 0;
            width: $property-width;
        }

        &::before {
            order: 1;
        }

        > div:last-child {
            display: none;
        }

        .formly-field {
            align-items: flex-start;
            border-left: solid $property-horiz-spacing transparent;
            border-right: solid $property-horiz-spacing transparent;
            display: flex;
            flex-basis: auto;
            flex-grow: 0;
            flex-shrink: 1;
            flex-wrap: wrap;
            font-size: 0; // to eliminate empty space. Must redefine font-size in children!
            margin: 0 0 12px;
            min-height: $property-min-height;
            order: 0;
            width: $property-width;

            .form-group {
                margin: 0;
            }

            .form-control {
                z-index: auto;
            }

            label {
                color: $gray-dark;
                display: inline-flex;
                font-size: $font-size-normal;
                font-weight: 400;
                margin: 6px 4px 0 0;
                padding: 0;
                vertical-align: top;
                width: #{$property-label-width - 4px};

                div:first-child {
                    flex-grow: 1;
                    flex-shrink: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                }

                div:last-child {
                    flex-grow: 100;
                    flex-shrink: 0;
                    width: 3.5px;
                }
                &.btn-secondary {
                    color: $brand-secondary;
                    &:hover {
                        color: $white;
                    }
                }
            }

            input,
            textarea,
            select {
                border: solid 1px $gray-lightest;
                border-radius: 0;
                box-shadow: none !important;
                box-sizing: border-box;
                color: $gray-dark;
                display: inline-block;
                font-size: $font-size-normal;
                font-weight: 400;
                height: $property-min-height;
                max-width: $property-input-width;
                min-height: $property-min-height;
                padding: 0 $property-padding-default;
                width: $property-input-width;
            }

            input,
            textarea {
                &[disabled] {
                    background: transparent;
                    border-color: transparent;
                    cursor: default;

                    & + .input-group-btn {
                        display: none;
                    }
                }

                &::-ms-clear {
                    display: none;
                }
            }

            input {
                &:not([disabled]):focus,
                &:not([disabled]):hover {
                    background: $yellow-pale url('/novaweb/static/images/editable-icon.png') no-repeat right 4px top 6px;
                    padding-right: 20px;
                }

                &[type="date"]:hover,
                &[type="date"]:focus {
                    background: $yellow-pale;
                    padding-right: $property-padding-default;
                }
            }

            textarea {
                min-height: $property-multiple-height;
                overflow: auto;
                -ms-overflow-style: auto;
                padding: 5px 17px 0 $property-padding-default;

                &:not([disabled]):focus,
                &:not([disabled]):hover {
                    background: $yellow-pale url('/novaweb/static/images/editable-icon.png') no-repeat right 4px top 6px;
                    overflow: auto;
                    -ms-overflow-style: auto;
                }
            }

            .ui-select-single {
                min-height: $property-min-height;
                min-width: $property-input-width;

                .ui-select-search {
                    left: 0;
                    min-width: $property-input-width;
                    position: absolute;
                    top: 0;
                }

                &.no-custom {
                    .ui-select-search {
                        background: url('/novaweb/static/images/typeahead-arrow.png') no-repeat right top;

                        &:hover,
                        &:focus {
                            background-color: $yellow-pale;
                        }
                    }
                }

                .ui-select-toggle {
                    background: $white;
                    border: solid 1px $gray-lightest;
                    border-radius: 0;
                    box-shadow: none !important;
                    box-sizing: border-box;
                    color: $gray-dark;
                    display: block;
                    font-size: $font-size-normal;
                    font-weight: 400;
                    height: $property-min-height;
                    line-height: $property-min-height;
                    max-width: $property-input-width;
                    min-height: $property-min-height;
                    overflow: hidden;
                    padding: 0 $property-padding-default;
                    text-align: left;
                    width: $property-input-width;

                    &:hover,
                    &:focus {
                        background-color: $yellow-pale;
                    }

                    a {
                        position: absolute;
                        right: 20px;
                        color: #999;
                        padding: 0;
                        line-height: #{$property-min-height - 2px};
                        min-width: auto;
                        font-size: $font-size-normal;
                        font-weight: normal;
                    }

                    .glyphicon {
                        font-family: 'bp-font2';
                        position: static;
                    }

                    .glyphicon-remove::before {
                        content: $fonticon2-error;
                    }
                }

                .caret.pull-right {
                    background: url('/novaweb/static/images/typeahead-arrow.png') no-repeat;
                    border: 0;
                    display: block;
                    height: 26px;
                    position: absolute;
                    right: 0;
                    top: 0;
                    width: 23px;
                }

                .ui-select-placeholder {
                    color: $gray-lighter;
                }

                .ui-select-match-item-chosen {
                    overflow: hidden;
                    padding: 0 20px 0 0;
                    text-overflow: ellipsis;
                    white-space: pre;
                    width: #{$property-input-width - 30px};
                }

                .ui-select-choices {
                    border-color: $gray-lighter;
                    border-radius: 0;
                    border-width: 1px;
                    max-height: #{$property-choice-height * 10};
                    overflow: auto;
                    -ms-overflow-style: auto;
                    padding: 0;
                    top: $property-min-height;
                    width: $property-input-width;

                    .ui-select-choices-row {
                        height: $property-choice-height;
                    }

                    .ui-select-choices-row-inner {
                        color: $gray-darkest;
                        cursor: pointer;
                        text-decoration: none;

                        &:hover .ui-select-choice-item {
                            background: $selection-hover-background-color;
                        }
                    }

                    .ui-select-choice-item {
                        font-size: 1.2rem;
                        line-height: $property-choice-height;
                        overflow: hidden;
                        padding: 0 8px;
                        text-overflow: ellipsis;
                        white-space: pre;
                        width: 100%;

                        &::before {
                            content: '';
                            display: inline-block;
                            width: 12px;
                        }
                    }

                    .ui-select-choices-row.disabled .ui-select-choice-item {
                        background: transparent;
                        color: $gray;
                    }

                    .ui-select-choices-row.active .ui-select-choice-item {
                        background: $selection-selected-background-color;
                        color: $selection-selected-color;
                    }

                    .ui-select-choice-item-selected::before {
                        content: '\2713';
                    }
                }

                .ui-select-no-choice {
                    border-color: $gray-lighter;
                    border-radius: 0;
                    border-width: 1px;
                    font-size: 1.2rem;
                    line-height: $property-choice-height;
                    padding: 0 8px;
                    top: #{$property-choice-height + 4px};
                    width: $property-input-width;
                }

                .ui-select-offscreen {
                    clip: rect(0 0 0 0) !important;
                    width: 1px !important;
                    height: 1px !important;
                    border: 0 !important;
                    margin: 0 !important;
                    padding: 0 !important;
                    overflow: hidden !important;
                    position: absolute !important;
                    outline: 0 !important;
                    left: 0px !important;
                    top: 0px !important;
                }
            }

            $ui-select-input-height: $property-min-height - 4px;
            .ui-select-multiple {
                border: 0;
                box-shadow: none !important;
                float: none;
                height: $property-min-height;
                max-width: #{$property-input-width - 20px};
                overflow: visible;
                padding: 0;
                width: #{$property-input-width - 20px};

                > div {
                    border: solid 1px $gray-lightest;
                    max-height: $property-multiple-height;
                    overflow: auto;
                    -ms-overflow-style: auto;
                    padding: 0;
                    width: $property-input-width;

                    &:focus,
                    &:hover {
                        background: $yellow-pale url('/novaweb/static/images/editable-icon.png') no-repeat right 4px top 6px;
                    }

                    &::before {
                        background: transparent;
                        content: ' ';
                        display: block;
                        float: right;
                        height: $ui-select-input-height;
                        width: 20px;
                    }
                }

                &.has-scrollbar > div::before {
                    content: none;
                }

                .ui-select-match-item {
                    background: $gray-lightest;
                    border-color: $gray-lighter;
                    border-width: 1px;
                    box-shadow: none;
                    margin: 2px;
                    max-width: calc(100% - 24px);
                    min-width: calc((100% - 32px) / 3);
                    outline: none;
                    padding: 0;

                    span.close {
                        color: $gray;
                        font-size: 16px;
                        line-height: 18px;
                        opacity: 1;
                        text-shadow: none;
                        width: 20px;
                    }

                    span:not(.close) {
                        float: left;
                        max-width: calc(100% - 20px);
                    }

                    &.btn-primary {
                        background: $brand-secondary;
                        border-color: $brand-secondary;

                        span.close,
                        .ui-select-match-item-chosen {
                            color: $white;
                        }
                    }
                }

                .ui-select-match-item-chosen {
                    color: $gray-darkest;
                    font-size: 1.2rem;
                    line-height: 18px;
                    overflow: hidden;
                    padding-left: 4px;
                    text-overflow: ellipsis;
                    white-space: pre;
                }

                input,
                input:hover,
                input:focus {
                    background: transparent;
                    border: 0;
                    font-size: 1.2rem;
                    height: $ui-select-input-height;
                    line-height: $ui-select-input-height;
                    margin: 0;
                    max-height: $ui-select-input-height;
                    min-height: $ui-select-input-height;
                    outline: none;
                    padding: 0 0 0 6px;
                }

                .ui-select-choices {
                    border-color: $gray-lighter;
                    border-radius: 0;
                    border-width: 1px;
                    max-height: #{$property-choice-height * 10};
                    overflow: auto;
                    -ms-overflow-style: auto;
                    padding: 0;
                    width: $property-input-width;

                    .ui-select-choices-row {
                        height: $property-choice-height;

                        .ui-select-choices-row-inner {
                            color: $gray-darkest;
                            cursor: pointer;
                            text-decoration: none;

                            .ui-select-choice-item {
                                font-size: 1.2rem;
                                line-height: $property-choice-height;
                                overflow: hidden;
                                padding: 0 8px;
                                text-overflow: ellipsis;
                                white-space: pre;
                                width: 100%;

                                &::before {
                                    content: '';
                                    display: inline-block;
                                    width: 12px;
                                }
                            }
                        }
                    }

                    &:not(.disable-highlight) .ui-select-choices-row-inner:hover .ui-select-choice-item {
                        background: $selection-hover-background-color;
                    }

                    &:not(.disable-highlight) .ui-select-choices-row.active .ui-select-choice-item {
                        background: $selection-selected-background-color;
                        color: $selection-selected-color;
                    }

                    .ui-select-choices-row.disabled {
                        .ui-select-choices-row-inner {

                            .ui-select-choice-item {
                                background: transparent;
                                color: $gray;

                                &::before {
                                    content: '\2713';
                                }
                            }
                        }
                    }
                }

                .ui-select-no-choice {
                    border-color: $gray-lighter;
                    border-radius: 0;
                    border-width: 1px;
                    font-size: 1.2rem;
                    line-height: $property-choice-height;
                    padding: 0 8px;
                    width: $property-input-width;
                }
            }

            .read-only-input {
                box-sizing: border-box;
                color: $gray-dark;
                font-size: $font-size-normal;
                font-weight: 400;
                background: $gray-lightest;

                &.simple,
                &.multiple {
                    border: solid 1px transparent;
                    max-width: $property-input-width;
                    overflow: hidden;
                    padding: 0 $property-padding-default;
                    width: $property-input-width;
                }

                &.simple {
                    height: $property-min-height;
                    line-height: $property-min-height;
                    text-overflow: ellipsis;
                    white-space: pre;
                }

                &.multiple {
                    margin-top: 5px;
                    max-height: #{2.5 * $property-min-height};
                    min-height: #{$property-min-height - 5px};
                    overflow: auto;
                    padding-bottom: 4px;

                    .choice {
                        overflow: hidden;
                        text-overflow: ellipsis;
                        white-space: pre;
                    }
                }

                &.inline,
                &.richtext {
                    color: $richtext-fontcolor;
                    font-family: $richtext-fontfamily;
                    font-size: $richtext-fontsize;
                    padding: 0;

                    a {
                        color: $richtext-linkcolor;
                        cursor: pointer;
                        text-decoration: underline;
                    }

                    p {
                        color: $richtext-fontcolor;
                        font-family: $richtext-fontfamily;
                        font-size: $richtext-fontsize;
                    }
                }

                &.richtext {
                    max-height: 350px;
                    min-height: $richtext-min-height;
                    min-width: $property-input-width;
                    overflow: auto;

                    table {
                        border-collapse: collapse;
                        border-color: $richtext-fontcolor;
                        border-style: solid;
                        border-width: 1px;
                        width: 90%;

                        td {
                            border-color: $richtext-fontcolor;
                            border-style: solid;
                            border-width: 1px;
                            padding: 0 7px;
                        }
                    }
                }

                &.inline {
                    line-height: $property-min-height;
                    max-height: $property-min-height;
                    min-height: $property-min-height;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    width: $property-input-width;

                    * {
                        overflow: auto !important;
                        text-overflow: ellipsis !important;
                        white-space: nowrap !important;
                    }
                }
            }

            .has-messages {
                display: inline-table;
                position: relative;
                vertical-align: top;

                input.has-icon {
                    border-bottom-right-radius: 0;
                    border-right: 0;
                    border-top-right-radius: 0;
                    max-width: $property-input-with-icon-width;
                    width: $property-input-with-icon-width;
                }

                .input-group-btn {
                    width: $property-input-icon-width;

                    > .btn {
                        border: solid 1px $gray-lightest;
                        color: $gray-dark !important;
                        line-height: #{$property-min-height - 2px};
                        margin-left: 0;
                        min-width: $property-input-icon-width;
                        padding: 0;
                        text-align: center;
                        width: $property-input-icon-width;

                        &:active,
                        &:hover {
                            background: $gray-lightest;
                            box-shadow: none;
                        }
                    }
                }
            }

            select {
                padding: 2px;

                &[multiple] {
                    height: #{2.5 * $property-min-height};
                }

                &:not([multiple]) {
                    background: $white $property-select-background repeat-y right 7px top 0;
                    -ms-overflow-style: scrollbar;
                }

                &[disabled] {
                    cursor: default;
                }

                &:not([disabled]):hover {
                    background-color: $yellow-pale;
                }
            }

            .error-messages {
                bottom: calc((#{$font-size-smaller} + 2px) * -1);
                position: absolute;
                right: 0;

                .message {
                    font-size: $font-size-smaller;
                    white-space: nowrap;
                }
            }

            &.formly-field-bpFieldSelectMulti,
            &.formly-field-bpFieldUserPicker {
                .ui-select-wrapper {
                    width: $property-input-width;
                }
            }

            .has-error {
                textarea,
                input,
                .ui-select-container > div,
                .ui-select-single .ui-select-toggle {
                    border-color: $gray-lightest;
                    border-bottom-color: $brand-error;
                }

                select {
                    border-color: $brand-error;
                }

                .error-messages {
                    color: $brand-error;
                }
            }

            .read-only {
                background: transparent !important;
                border-color: transparent !important;
                cursor: default !important;
                padding-right: $property-padding-default !important;
            }
        }

        $user-picker-choice-size: 40px;
        $user-picker-results-count: 56px;
        .formly-field-bpFieldUserPicker {
            .ui-select-multiple .ui-select-choices {
                display: flex;
                flex-flow: column nowrap;
                max-height: #{5 * $user-picker-choice-size + $user-picker-results-count + 2px}; //2px is the top and bottom border
                min-height: #{1 * $user-picker-choice-size + 2px};
                overflow: hidden;

                .ui-select-choices-group {
                    max-height: 100%;
                    overflow: auto;

                    bp-avatar {
                        height: #{$user-picker-choice-size - 12px};
                        margin: 6px 2px;
                        width: #{$user-picker-choice-size - 12px};

                        .avatar-placeholder .initials {
                            font-size: $font-size-smaller;
                        }
                    }
                }

                .ui-select-choices-row {
                    height: $user-picker-choice-size;

                    .ui-select-choices-row-inner {
                        .ui-select-choice-item {
                            display: flex;
                            flex-flow: row nowrap;
                            height: $user-picker-choice-size;
                            line-height: 100%;
                            overflow: hidden;
                            padding: 0 8px;
                            text-overflow: clip;
                            white-space: normal;

                            &::before {
                                flex: none;
                                padding-top: 14px;
                            }

                            .ui-select-choice-info {
                                overflow: hidden;
                                padding: 6px 0 6px 4px;

                                div {
                                    overflow: hidden;
                                    text-overflow: ellipsis;
                                    white-space: nowrap;

                                    &:first-child {
                                        line-height: 16px;
                                    }

                                    &:last-child {
                                        font-size: $font-size-smaller;
                                        line-height: #{$user-picker-choice-size - 12px - 16px};
                                    }
                                }
                            }

                            .ui-select-choice-icon {
                                flex: none;
                                height: $user-picker-choice-size;
                                line-height: $user-picker-choice-size;
                                text-align: center;
                                width: #{$user-picker-choice-size - 8px};
                            }
                        }
                    }
                }

                .ui-select-results-count {
                    border-top: solid 1px $gray-lighter;
                    flex: none;
                    height: $user-picker-results-count;

                    div {
                        font-size: $font-size-normal;
                        height: 27px;
                        padding: 9px 0 0;
                        text-align: center;
                    }

                    button {
                        background: $white;
                        border: 0;
                        color: $brand-secondary;
                        font-size: $font-size-big;
                        font-weight: 600;
                        height: 20px;
                        line-height: 20px;
                        outline: none;
                        padding: 0;
                        width: 100%;

                        &:hover,
                        &:focus,
                        &:active {
                            background: $brand-secondary;
                            color: $white;
                        }
                    }
                }
            }
        }

        .formly-field-bpFieldTextRTF {
            > div {
                width: 100%;
            }

            .tinymce-group {
                display: block;
                width: 100%;

                .tinymce-focus-catcher {
                    left: -100px;
                    position: absolute;
                    top: 100px;
                    width: 10px;
                }
            }

            .mce-tinymce {
                border: 0;
                border-radius: 0;
            }

            .mce-toolbar-grp {
                border-color: $gray-lighter;
                border-width: 1px !important;
                min-width: 350px;
                padding: 0;
                position: absolute;
                top: -29px;

                .mce-flow-layout-item {
                    margin: 0;
                }

                .mce-btn button {
                    line-height: 19px;
                    padding: 3px;
                }
            }

            .mce-edit-area {
                border-color: transparent;
                border-width: 1px !important;
            }

            .tinymce-toolbar-hidden .mce-toolbar-grp {
                display: none;
            }

            .has-error {
                .mce-edit-area {
                    border-color: $brand-error;
                }
            }
        }

        .formly-field-bpFieldTextRTFInline {
            > div {
                width: 100%;
            }

            $tinymce-toolbar-height: 27px;
            .mce-panel,
            .mce-abs-layout {
                // since it's hidden on init, tinyMCE cannot calculate the dimensions by itself
                height: $tinymce-toolbar-height !important;
                width: #{$property-input-width - 2px} !important;
            }

            .mce-toolbar-grp {
                border: 0;
                padding: 0;

                .mce-flow-layout-item {
                    margin: 0;
                }

                .mce-btn button {
                    line-height: 19px;
                    padding: 3px;
                }
            }

            .tinymce-toolbar {
                height: #{$tinymce-toolbar-height + 2px};
                margin: -#{$tinymce-toolbar-height + 2px} 0 0;
            }

            .tinymce-toolbar-hidden {
                .tinymce-toolbar {
                    display: none;
                }
            }

            .tinymce-body-wrapper {
                border: solid 1px $gray-lightest;
                border-radius: 0;
                width: $property-input-width;

                &:focus,
                &:hover {
                    background: $yellow-pale url('/novaweb/static/images/editable-icon.png') no-repeat right 4px top 6px;
                    padding-right: 20px;
                }
            }

            .tinymce-body,
            .tinymce-body[contenteditable="true"] {
                box-shadow: none;
                box-sizing: border-box;
                color: $richtext-fontcolor;
                font-family: $richtext-fontfamily;
                font-size: $richtext-fontsize;
                font-weight: 400;
                line-height: $property-min-height;
                max-height: $property-min-height;
                min-height: $property-min-height;
                outline: none;
                overflow: hidden;
                padding: 0 2px 0 0;
                white-space: nowrap;
                width: 100%;

                a {
                    color: $richtext-linkcolor;
                    cursor: pointer;
                    text-decoration: underline;
                }

                p {
                    color: $richtext-fontcolor;
                    font-family: $richtext-fontfamily;
                    font-size: $richtext-fontsize;
                    font-weight: 400;
                }
            }

            .has-error {
                .tinymce-body-wrapper {
                    border-bottom-color: $brand-error;
                }
            }
        }

        .formly-field-bpFieldDatepicker {
            .btn {
                border-radius: 0;
                z-index: initial;
            }

            .has-error button {
                border-bottom-color: $brand-error !important;
            }
        }

        .formly-field-bpFieldImage {
            width: #{$property-width * .4};

            .inheritance-group {
                &.inheritance-group-wrapper {
                    display: flex;
                    align-items: center;

                    input[type=file] {
                        display: none;
                    }
                }

                .icon {
                    display: inline-block;
                    margin-left: 9px;
                    cursor: pointer;
                    &.disabled {
                        color: $disabled-color;
                    }
                    &:hover:not(.disabled)  {
                        color: $brand-secondary;
                    }
                }

                .actor-image-wrapper {
                    display: inline-flex;
                    align-items: center;
                    width: 90px;
                    height: 120px;
                    border: 1px solid $gray-lightest;
                    box-sizing: content-box;

                    span {
                        width: 90px;
                        height: 120px;
                        background: url('/novaweb/static/images/icons/user-default.svg') left top no-repeat;
                        display: inline-block;
                        background-color: $gray;
                        vertical-align: middle;
                    }

                    label {
                        width: 90px;
                        height: 120px;
                        display: block;
                        margin: 0;
                        box-sizing: content-box;
                        background-size: contain;
                        background-repeat: no-repeat;
                        background-position: 50% 50%;
                    }

                    ~ label {
                        display: inline-block;
                        width: auto;
                    }
                }

                .image-actor-group {
                    font-size: $font-size-normal;
                    margin: 5px 9px;
                    &.glyphicon-plus {
                        background-color: $blue-light;
                        color: $white;
                        padding: 4px 3px 4px 4px;
                        border-radius: $border-radius-small;
                        cursor: pointer;
                        &.disabled {
                            background-color: $gray;
                        }
                    }
                }
            }
        }

        $property-inheritance-width: $property-width * 1.6; //change to 2.5 to span 3 columns instead of 2
        .formly-field-bpFieldInheritFrom {
            padding-top: 49px;
            display: block;
            max-width: $property-inheritance-width;
            min-width: $property-input-width;
            width: 100%;

            .icon {
                cursor: pointer;
                margin-right: 5px;
                &:hover {
                    color: $brand-secondary;
                }
                &.disabled {
                    color: $disabled-color;
                }
            }
            .din {
                display: inline-block;
                padding-top: 10px;
                padding-right: 2px;
            }

            .inheritance-group {
                display: inline-flex;
                font-size: $font-size-normal;
                width: calc(100% - #{$property-label-width});

                button {
                    &.disabled, &[disabled] {
                        background-color: $gray-lighter;
                        border-color: $gray-light;
                        color: $gray-light;
                        opacity: 1;
                    }
                }

                .bp-input-group-addon {
                    &.icon-wrapper {
                        line-height: #{$property-min-height + 6px}; // height of input box plus padding
                        display: inline-block;
                        padding-right: 2px;
                    }
                }
                .inheritance-path {
                    border-color: $gray-lighter;
                    background-color: $gray-lightest;
                    border-width: 1px;
                    flex-grow: 1;
                    flex-shrink: 1;
                    height: $property-min-height;
                    line-height: $property-min-height;
                    min-width: $property-input-width - 90px;
                    @include text-ellipsis-flex-width(999px);
                    padding: 0 $property-padding-default;
                    margin-top: 2px;
                    margin-right: 8px;
                    max-width: calc(100% - 40px);
                    .path-wrapper {
                        overflow: hidden;
                        text-overflow: ellipsis;
                    }
                    span {
                        &::before {
                            content: ' > ';
                        }

                        &:first-child {
                            &::before {
                                content: '';
                            }
                        }
                    }
                }

                .inheritance-tools {
                    flex-grow: 0;
                    flex-shrink: 0;
                    margin: 5px 9px;
                }
            }
        }

        .form-control-wrapper {
            display: table-cell;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            padding: 4px;

            .form-control {
                width: 100%;
                max-width: 100%;
                margin: 2px;
                background-color: white;
                background-image: none !important;
                &:hover {
                    background-image: none !important;
                }
            }
        }

        .formly-field-bpDocumentFile {
            width: 100% !important;
            .input-group-addon {
                padding: 0;
                background-color: transparent;
                border: none;
                label {
                    padding: 5px 9px;
                    min-width: 20px;
                    text-align: center;
                    width: auto !important;
                    margin: 5px 5px 5px;
                    font-size: $font-size-big;
                    input[type=file] {
                        display: none;
                    }
                    &.btn-small {
                        padding: 5px 10px;
                        min-width: 20px;
                        font-size: 1.2rem;
                    }
                    &.btn-primary {
                        background-color: transparent;
                        border: 1px solid $gray-light;
                        color: $gray-light;
                        &:hover,
                        &:focus,
                        &:active {
                            background-color: transparent;
                            border-color: $brand-secondary;
                            color: $brand-secondary;
                        }
                    }
                }

                .icon {
                    display: inline-block;
                    margin-left: $padding-smaller;
                    margin-right: $padding-smaller;
                }

                .icon__action{
                    &:hover{
                        cursor: pointer;
                        color: $brand-secondary;
                    }

                    &.disabled, &[disabled] {
                        color: $disabled-color;
                    }
                }

                &:not(:first-child):not(:last-child) {
                    padding-right: 5px;
                    .icon {
                        margin-right: $padding-smaller - 5px;
                    }
                }
            }

            .thumb {
                width: 30px;
                height: 30px;
                &.fonticon2-attachment {
                    padding-top: 10px;
                }
            }
            .form-control-wrapper {
                display: table-cell;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                padding: 4px;

                .form-control {
                    background: $white;
                    margin: 2px;
                    max-width: 100%;
                    width: 100%;
                    &[disabled] {
                        border: 1px solid $gray-lightest;
                    }
                    &:hover,
                    &:focus {
                        background: $white;
                        padding-right: $property-padding-default;
                    }
                }
            }
        }
    }
}

.single-column-property {
    .properties.collapsed .content.system-properties {
        height: #{$property-min-height + 23px + 12px}; // + label's height + margin-bottom
    }

    .formly .formly-field label {
        margin-right: 0;
        padding: 0;
        width: $property-input-width;
    }
}

.tab-pane {
    border: solid 1px $gray-lighter;
    border-radius: $border-radius-amount;
    padding: 18px 15px;

    .rich-text-wrapper {
        min-height: $richtext-min-height;
    }

    .formly {
        margin: 0;
        min-width: $property-input-width;
        padding: 0;

        .formly-field {
            border: 0;
            margin: 0;
            padding: 0;
            width: 100%;
        }

        .form-tinymce {
            border: 0;
            margin: 0 -2px;
            padding: 2px;
            width: calc(100% + 4px);
        }

        .formly-field-bpFieldReadOnly {
            > div {
                width: 100%;
            }

            .input-group {
                display: block;

                .richtext-body {
                    display: inline-block;
                }
            }
        }
    }
}

bp-properties-panel {
    .properties.collapsed {
        margin-bottom: 0;
    }

    .tab-pane {
        padding: 8px 10px 12px;
    }
}

pagecontent {
    .empty-collection {
        padding: 0 0 11px 0;
    }

    .empty-collection__table {
        border-left: 1px solid $gray-lighter;
        border-right: 1px solid $gray-lighter;
        border-bottom: 1px solid $gray-lighter;
        width: 100%;
    }

    .empty-collection__table-th {
        background: $gray-dark;
        color: $white;
        font-size: $font-size-normal;
        padding: 8px 25px;

        &:first-child {
            width: 9%;
        }

        &:last-child {
            text-align: right;
            padding-right: 9px;
        }
    }

    .empty-collection__table-td {
        padding: 8px 25px;
        font-size: $font-size-normal;
        color: $gray-light;
    }
}

.uib-datepicker-popup {
    border-color: $brand-secondary;
    border-radius: 0;
    padding: 0 0 7px;

    li > .uib-datepicker {
        margin-top: -1px;
    }

    table.uib-daypicker,
    table.uib-monthpicker,
    table.uib-yearpicker {
        margin: 0 -1px;
        outline: none;
        width: $property-input-width;

        thead tr:first-child th {
            button {
                border-color: $brand-secondary;
            }

            &:first-child button {
                border-right: 0;
                color: $brand-secondary;
            }

            &:last-child button {
                border-left: 0;
                color: $brand-secondary;
            }
        }
    }

    table.uib-yearpicker {
        tbody tr:first-child td {
            padding-top: 8px;
        }

        tbody td {
            border: solid 1px transparent;
            width: 52px;

            &:first-child {
                padding-left: 5px;
                width: 57px;
            }

            &:last-child {
                padding-right: 6px;
                width: 58px;
            }

            .btn {
                width: 100%;
            }
        }
    }

    table.uib-monthpicker {
        tbody tr:first-child td {
            padding-top: 8px;
        }

        tbody td {
            border: solid 1px transparent;
            width: 87px;

            &:first-child {
                padding-left: 5px;
                width: 92px;
            }

            &:last-child {
                padding-right: 6px;
                width: 93px;
            }

            .btn {
                width: 100%;
            }
        }
    }

    table.uib-daypicker {
        thead tr:last-child th,
        tbody td {
            border: solid 1px transparent;
            line-height: 28px;
            width: 37px;

            &:first-child {
                padding-left: 6px;
                width: 43px;
            }

            &:last-child {
                padding-right: 7px;
                width: 44px;
            }
        }
    }

    .btn {
        border-radius: 0 !important;
        color: $gray-dark;
        min-width: 36px;
        outline: none;
        padding: 5px 10px;

        &:active,
        &:hover {
            background: $blue-lightest;
            border-color: $brand-secondary;
            box-shadow: none;
        }

        &.active {
            background: $brand-secondary !important;
            box-shadow: none;
            color: $white;
        }

        span {
            color: inherit;
        }
        .btn-bp-small {
            margin-left: 5px;
            padding: 5px 9px;
            min-width: 20px;
            &.disabled {
                background-color: $disabled-color;
            }
        }
    }

    .uib-button-bar {
        padding: 10px 6px 0;

        .btn-info,
        .btn-danger,
        .btn-success {
            background: $white;
            border-color: $gray-lighter;
            border-radius: 4px !important;
            float: none;
        }
    }
}
