<form class="search-form">
    <button type="submit" class="btn btn-small btn-promoted-action" ng-click="$ctrl.search()" ng-disabled="$ctrl.isSearching || !$ctrl.searchText">
        <i class="fonticon2-search"></i>
    </button>
    <div class="search-input">
        <input type="text" class="form-control" placeholder="{{::$root.config.labels['Label_Search']}}" ng-model="$ctrl.searchText" />
        <i class="fonticon-error" ng-show="$ctrl.searchText || $ctrl.searchResults" ng-click="$ctrl.clearSearch()"></i>
    </div>
</form>
<div class="project-wrapper">
    <div class="artifact-picker-container">
        <div class="search-wrapper" ng-if="$ctrl.isSearching || $ctrl.searchResults">
            <div class="search-message" ng-if="$ctrl.isSearching">
                {{::$root.config.labels['Label_Searching']}}
            </div>
            <div class="search-message" ng-if="!$ctrl.isSearching && $ctrl.searchResults.length === 0">
                {{::$root.config.labels['Label_No_Results_Found']}}
            </div>
            <div class="search-results" perfect-scrollbar opts="{ minScrollbarLength: 20, scrollXMarginOffset: 4, scrollYMarginOffset: 4}" ng-if="!$ctrl.isSearching && $ctrl.searchResults.length !== 0">
                <div class="search-result" bp-tooltip="{{searchResult.name}}" bp-tooltip-truncated="true" ng-repeat="searchResult in $ctrl.searchResults" ng-click="$ctrl.project = searchResult">
                    <i class="icon-project"></i><span ng-bind-html="::searchResult.name | bpEscapeAndHighlight:$ctrl.searchText"></span>
                </div>
            </div>
        </div>
        <div ng-if="!$ctrl.isSearching && !$ctrl.searchResults">
            <div class="grid-header">
                <div ng-if="$ctrl.project">
                    <i class="fonticon2-arrow-double-left" ng-click="$ctrl.project = undefined"></i><i class="icon-project"></i>
                    &nbsp;&nbsp;&nbsp;<span class="project-name" bp-tooltip="{{$ctrl.project.name}}" bp-tooltip-truncated="true">{{$ctrl.project.name}}</span>
                </div>
                <div ng-if="!$ctrl.project">
                    {{::$root.config.labels['App_Header_Name']}}
                </div>
            </div>
            <bp-tree-view grid-class="project-tree"
                          selection-mode="$ctrl.currentSelectionMode"
                          row-height="20"
                          root-node="$ctrl.rootNode"
                          root-node-visible="false"
                          columns="$ctrl.columns"
                          header-height="20"
                          on-select="$ctrl.onSelect(vm, isSelected, selectedVMs)">
            </bp-tree-view>
        </div>
    </div>
</div>
