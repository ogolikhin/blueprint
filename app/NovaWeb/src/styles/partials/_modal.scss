$modal-side-clearance: 8px;

.modal {
  margin: 0;

  .modal-content {
    @include rounded-corners($border-radius-amount $border-radius-amount $border-radius-amount $border-radius-amount);
    border: 0;
  }

  .modal-header {
    @include rounded-corners($border-radius-amount $border-radius-amount 0 0);
    background-color: $brand-secondary;
    padding: 15px 30px;

    .modal-title {
      color: $white;
      font-size: $font-size-biggest;

      .fonticon-modal::before {
        content: $fonticon-information;
        vertical-align: bottom;
      }
    }

    .modal-close {
      color: $blue-lightest;
      cursor: pointer;
      float: right !important;
      text-decoration: none;

      &:hover {
        color: $white;
      }

      .fonticon-close::before {
        font-size: 1.6rem;
      }
    }
  }

  .modal-dialog {
    bottom: 0;
    left: 0;
    margin: auto;
    max-height: 450px;
    max-width: 440px;
    min-width: 320px;
    padding: 0 $modal-side-clearance;
    position: absolute;
    right: 0;
    top: 0;
  }

  .modal-footer {
    @include rounded-corners(0 0 $border-radius-amount $border-radius-amount);
    background: $gray-lightest;
    border-top: solid 1px $gray-lighter;
    color: $gray-light;
    padding: 15px 30px;
    width: 100%;

    .nova-form-group {
      margin: 0;
    }
  }
}

.modal.modal-alert {
  .modal-header {
    background-color: $brand-warning;

    .modal-title .fonticon-modal::before {
      content: $fonticon-warning;
    }
  }

  /* Note: '.modal-alert .btn-promoted-action' is defined in _button.scss */
}

$modal-open-project-height: 450px;
.modal.nova-open-project {
  .modal-dialog {
    min-height: $modal-open-project-height;
    min-width: #{700px + (2 * $modal-side-clearance)};
  }

  .modal-content {
    min-height: $modal-open-project-height;
    min-width: 700px;
  }

  .modal-header {
    h3 {
      line-height: 40px;
    }
  }

  .modal-header,
  .modal-footer {
    height: 70px;
  }

  .modal-body {
    background: $modal-bg-color;
    height: calc(100% - 70px - 70px); // only the main body of the dialog will resize, no header or footer
    min-height: 310px;
    padding: 15px 30px;

    .search-form {
      margin-bottom: 15px;

      .search-input {
        position: relative;
        overflow: hidden;
      }

      .form-control {
        padding-right: 31px;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      }

      .fonticon-error {
        position: absolute;
        color: $brand-secondary;
        top: 0px;
        right: 0;
        height: 34px;
        padding-top: 8px;

        &::before {
          font-size: 2.2rem;
        }
      }

      .btn {
        float: right;
        height: 34px;
        font-size: 1.4rem;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
      }

      .fonticon2-search::before {
        display: inline;
      }
    }

    .search-wrapper {
      background: $white;
      border: solid 1px $gray-lightest;
      border-radius: $border-radius-amount;
      min-height: $artifact-picker-tree-height;
    }

    .search-message {
      font-size: $font-size-big;
      color: $gray-light;
      padding: 30px 10px;
      text-align: center;
    }

    .search-results {
      max-height: $artifact-picker-tree-height;
      box-sizing: content-box;
    }

    .search-result {
      display: flex;
      border: 1px solid $gray-lightest;

      & > i {
        font-size: 24px;
        line-height: 36px;
        color: $brand-secondary;
      }

      &:hover {
        background-color: $tree-hover-background;
      }
    }

    .search-details {
      min-width: 0;

      & > div {
        @include text-ellipsis-flex-width(unset);
        font-size: 1.2rem;
        line-height: 18px;
        cursor: default;
      }
    }

    .bp-highlight {
      text-decoration: underline;
    }

    .project-wrapper {
      height: 100%;
    }

    .project-tree-container {
      box-sizing: border-box;
      display: block;
      float: left;
      height: calc(100% - 50px);
      margin: 0 15px 0 0;
      min-height: $project-picker-tree-height;
      width: calc(100% - #{$project-picker-data-width + 15px});
    }

    .artifact-picker-container{
      box-sizing: border-box;
      display: block;
      float: left;
      height: calc(100% - 50px);
      margin: 0 15px 0 0;
      min-height: $artifact-picker-tree-height;
      width: $artifact-picker-data-width;
    }

    .grid-header {
      color: $brand-secondary;
      font-size: $font-size-normal;
      font-weight: 600;
      top: 72px;
      position: absolute;
      text-align: left;
      text-indent: 6px;
      z-index: 100;

      .fonticon2-arrow-double-left {
        cursor: pointer;

        &::before {
          font-size: 1rem;
          line-height: 1rem;
          margin-bottom: -10px;
          margin-left: -7px;
        }
      }

      .project-name {
        display: inline-block;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 560px;
        vertical-align: bottom;
      }
    }

    .project-tree {
      background: $white;
      border: solid 1px $gray-lightest;
      border-radius: $border-radius-amount;
      height: 100%;
      min-height: $project-picker-tree-height;
    }

    .project-data {
      display: block;
      float: left;
      font-size: 13px;
      width: $project-picker-data-width;

      .project-name {
        @include text-ellipsis-flex-width(999px);
        background: $gray-lightest;
        border-radius: $border-radius-amount;
        height: 36px;
        line-height: 36px;
        margin-bottom: 15px;
        margin-top: 10px;
        padding: 0 15px;
        white-space: nowrap;
      }

      .project-description-wrapper {
        background: $gray-lightest;
        border-radius: $border-radius-amount;
        margin-top: 10px;
        max-height: 137px;
        min-height: 36px;

        .project-description {
          padding: 8px 15px;
        }
      }
    }

    &::before {
      content: ' ';
      display: table;
    }

    &::after {
      clear: both;
      content: ' ';
      display: table;
    }
  }
}

.modal.nova-messaging {
  .modal-body {
    padding: 30px 56px;

    .nova-message {
      box-sizing: content-box;
      font-size: $font-size-normal;
      min-height: 3em;
    }
  }
}

.nova-login-confirm,
.modal.nova-login {
    z-index:18000 !important;
}

.modal.nova-login {
  .modal-header {
    background: $brand-secondary url('images/logo-storyteller-white.svg') center center no-repeat;
    background-size: 180px;
    height: 89px;
  }

  .modal-body {
    padding: 11px 56px;

    input[type=text],
    input[type=password] {
      box-shadow: inset 0 0 0 1000px $white !important;
    }

    .modal-panel-container {
      min-height: 330px;
      overflow: hidden;
      position: relative;

      &.modal-panel-not-login .modal-panel {
        -webkit-transition-duration: .5s;
        -moz-transition-duration: .5s;
        -o-transition-duration: .5s;
        transition-duration: .5s;
        -ms-transform: translate(-120%, 0); /* IE 9 */
        -webkit-transform: translate(-120%, 0); /* Safari */
        transform: translate(-120%, 0); /* Standard syntax */
      }

      &.modal-panel-login .modal-panel {
        -webkit-transition-duration: .5s;
        -moz-transition-duration: .5s;
        -o-transition-duration: .5s;
        transition-duration: .5s;
        -ms-transform: translate(0, 0); /* IE 9 */
        -webkit-transform: translate(0, 0); /* Safari */
        transform: translate(0, 0); /* Standard syntax */
      }
    }

    .modal-panel {
      background: $white;
      left: 120%;
      position: absolute;
      top: 0;
      width: 100%;
    }

    .modal-panel:first-child {
      left: 0;
    }

    .nova-login-message {
      box-sizing: content-box;
      font-size: $font-size-normal;
      min-height: 3em;
      padding: 17px 0 25px;
      text-align: center;

      &.error {
        color: $brand-error;
      }
    }

    #modal-login-form {
      button[type='submit'] {
        position: relative;

        span {
          left: 9px;
          position: absolute;
          top: 11px;
        }
      }
    }

    #modal-login-saml {
      .nova-login-message {
        font-size: $font-size-big;
        text-align: left;
      }
    }

    .nova-form-beneath {
      margin-top: -12px;

      a {
        color: $gray-dark;
        font-size: $font-size-normal;
        text-decoration: none;
      }

      a:hover {
        color: $brand-secondary;
        text-decoration: underline;
      }
    }

    .nova-login-to {
      color: $brand-secondary;
      font-size: $font-size-normal;
      margin-top: 4px;
    }
  }

  .modal-footer {
    padding: 0;
    display: table;
    min-height: 60px;

    div {
      display: table-cell;
      font-size: $font-size-normal;
      padding: 8px 0;
      text-align: center;
      vertical-align: middle;
    }
  }
}